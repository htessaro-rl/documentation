---
id: rcs-with-af-databases
title: RCS with AF databases
slug: /setup-and-administration/automation/rcs-with-af-databases
description: 'Describe RCS with AF databases.'
tags: ['documentation']
---

import StylizedImage from '@site/src/components/StylizedImage/StylizedImage';

import table from '@site/static/data/tables/setup-adm/automation/how-to-use/AFObjectTypesAndValues.json';
import JsonToTable from '@site/src/components/Table/JsonToTable';

Visual KPI gives you the power to automate the configuration of Visual KPI sites based on external applications or systems. Using a Visual KPI Remote Context Service (RCS), you can integrate with applications like OSIsoft PI System (AF). This document is meant to be a guide for how to leverage the power of the Visual KPI AF Remote Context Service to automate the creation of Visual KPI Profile Groups, Profiles, Dashboards and Bookmarks.

## Terminology

While the term dashboards is frequently used when talking about the end visualization in Visual KPI there are actually a few more terms you need to understand.

1. **Profile Groups**: Think of these as a place to hold one or more Profiles.  This is simply a way to help organize Profiles (which will contain dashboards) in a way that makes sense to the end user.  You could have Profiles Groups such as Executive Profiles, Engineer Profiles, Region A Profiles etc.
2. **Profiles**: Profiles contain bookmarks, watchlists and of course Dashboards. 
3. **Dashboards**: A dashboard is a collection of widgets plus some other properties such as default time spans. 
4. **Widget**: An object visualization contained in the dashboard.  Examples are KPI Block, Trend, List of groups, Table, Embedded Content, etc.  Widgets each have a visualization or a Visual KPI object along with its size and position on the dashboard.
5. **Bookmarks**: Quick links that navigate to a particular page or visualization withing Visual KPI.


## Hierarchical vs Parent ID

There are two options to choose from when defining the relationships between Profile Groups and Profiles, Profiles and Dashboards, and Dashboards to Widgets.  One is based on hierarchical positioning or nesting and the other requires an attribute defining the parent id (Profile Group ID, Profile ID, Dashboard ID).

Most customers choose to use a combination of specifying the parent ID and leveraging the inherent hierarchy. For example, placing all Widgets under the Dashboard Attribute but specifying the Profile ID in the dashboard properties.  Specifying the parent ID will override any implicit relationship defined based on its hierarchical position.  When in doubt specify!

### Hierarchical

For the hierarchical approach you can nest widgets under a dashboard, dashboards under a profile and profiles under profile groups.

<StylizedImage
  imgURL="img/setup-adm/automation/how-to-use/af-database/new/af-1.png"
  alt=""
/>

### Parent ID

The second approach is to explicitly state the parent ID.  To specify the Profile Group for which profile belong to you would create an attribute called Profile Group ID a value of the ID (GUID) of the Profile Group.  This approach can be used to define the Profile for which a Dashboard belongs to using an attribute named Profile ID as well as what dashboard a widget belongs to using an attribute name Dashboard ID.  Here is an example of a Profile with explicit reference to a Profile Group (Profile Group ID of 559b8359-9b39-4e26-8977-4abf260d59cf).

<StylizedImage
  imgURL="img/setup-adm/automation/how-to-use/af-database/new/af-2.png"
  alt=""
/>

## Accessing AF Object IDs

In addition to Profile Group ID, Profile ID and Dashboard ID, most widgets will also reference an AF Object ID.  Getting these IDs is a simple task, but it does require the option to be enabled in the PI System Explorer.  A right-click in the bottom right corner of the PI System Explorer will display a menu allowing you to enable (or disable) the display of the Unique AF Object IDs (GUIDs).

<StylizedImage
  imgURL="img/setup-adm/automation/how-to-use/af-database/new/af-3.png"
  alt=""
/>

Once enabled you can both view and copy the ID.  The following shows how the value for Profile Group ID was obtained.  Selected the Attribute called AF Profile Group shows me the ID of 559b8359-9b39-4e26-8977-4abf260d59cf which I can then paste into my Profile Group ID attribute.

<StylizedImage
  imgURL="img/setup-adm/automation/how-to-use/af-database/new/af-4.png"
  alt=""
/>

If you wish to reference an object not created via the AF RCS you can replace AF Object ID with Visual KPI Object ID and use the ID value (found in the Visual KPI Designer).

## Object Type

Using an attribute called Object Type is the preferred method of identifying the mapping of AF Attributes to Visual KPI Objects.  This is required when using the Visual KPI AF RCS to automate the creation of Dashboards.  All objects in the document will require an Attribute called Object Type with a value of one of the following:

- Profile Group
- Profile
- Dashboard
- Widget
- Bookmark

While best practices for leveraging the Visual KPI AF RCS are beyond the scope of this document we do recommend always nested Visual KPI Attributes under another Attribute called Visual KPI Properties.  You will see this throughout this document.

## Widget Type

In addition to Object Type there is also another important Attribute named Widget Type.  When you defined a widget, you will need both an Object Type = Widget Attribute along with a Widget Type Attribute which will define what type of widget we want to create. Possible Widget Type values are:

- Group List
- Group Geo
- Group Block
- KPI List
- KPI Geo
- KPI Bullet
- KPI Map
- Group Map
- KPI Summary History
- KPI Status History
- KPI Notification History
- KPI Block
- KPI Trend
- Gauge Chart
- Chart List
- Chart Geo
- Bar Chart
- Box Plot                  
- Embedded Content
- Gantt Chart                 
- Pareto Chart
- Pie Chart
- Trend
- XY Plot
- Table List
- Table Geo
- Table
- Generic Link
- Dashboard Link
- Text Block

## Configuration

While you can create the required attributes anywhere in your AF Model that define Profile Groups, Profiles, Dashboards and Widgets you can also create a special AF Element just for this purpose.  To create this Configuration placeholder simply create an AF Element with an Attribute called Object Type and a value of Configuration.  Normally the Visual KPI AF RCS will map AF Elements to Visual KPI Groups.  If the AF Element has a child Object Type Attribute with a value of Configuration, then this AF Element is not mapped to a Visual KPI Group but instead the child attributes are iterated looking for objects such as Profile Groups, Profiles, Dashboard, Widgets and Bookmarks.  Examples in this document leverage this approach to isolate Visual KPI objects from the core AF Model.  Here you can see we have Group 01, Group 02 and Sub Group 01 Elements in addition to a Configuration element.  The Visual KPI AF RCS will create Visual KPI Groups for Group 01, Group 02 and Sub Group 01 but not for Configuration.

<StylizedImage
  imgURL="img/setup-adm/automation/how-to-use/af-database/new/af-5.png"
  alt=""
/>

## Design First

When building a dashboard programmatically by defining AF Attributes it is best to first construct one manually to better understand size and position attributes.  For example, if you wanted a Dashboard with a Group List, a Group Geo and 3 Group Block widgets it would be a good practice to first create one in Visual KPI and then use the “Customize Dashboard” display to inspect the widget properties. 

<StylizedImage
  imgURL="img/setup-adm/automation/how-to-use/af-database/new/af-6.png"
  alt=""
/>

<StylizedImage
  imgURL="img/setup-adm/automation/how-to-use/af-database/new/af-7.png"
  alt=""
/>

Here information such as Type (which will map directly to Widget Type) along with Row Start, Column Start, Height and Width can be seen.

## Reference

Attributes and values (both required and optional) can fully automate Dashboard creation from within OSIsoft's PI System Explorer. Each component (Profile Groups, Profiles, Dashboards, Widgets and Bookmarks) will have section listing all supported attributes. Find detailed reference about each at [Setup and Administration Reference](/docs/reference/setup-and-administration-reference#af-rcs-dashboard) page.