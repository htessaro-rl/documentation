---
id: rcs-with-af-databases
title: RCS with AF databases
slug: /setup-and-administration/automation/rcs-with-af-databases
description: 'Describe RCS with AF databases.'
tags: ['documentation']
---

import StylizedImage from '@site/src/components/StylizedImage/StylizedImage';
import Accordion from '@site/src/components/accordion/Accordion';
import table from '@site/static/data/tables/setup-adm/automation/how-to-use/AFObjectTypesAndValues.json';
import JsonToTable from '@site/src/components/Table/JsonToTable';
import LinkCards from '@site/src/components/Cards/LinkCards';

Visual KPI allows you to automatically set up Visual KPI sites using external applications or systems. By using a Visual KPI Remote Context Service (RCS), you can connect with applications such as OSIsoft PI System (AF). This page guides you on how to use the Visual KPI AF Remote Context Service to automate the creation of Visual KPI Profile Groups, Profiles, Dashboards, and Bookmarks.

## Terminology

While the term **dashboards** is often used to describe the final visualizations in Visual KPI, there are several other important terms you should be familiar with:

1. **Profile Groups**:A place to hold one or more profiles. This helps organize profiles (which contain dashboards) in a way that makes sense to the end user. You can have profile groups such as Executive Profiles, Engineer Profiles, Region A Profiles, and so on.
2. **Profiles**: Profiles contain bookmarks, watchlists and Dashboards. 
3. **Dashboards**: A dashboard is a collection of widgets along with other properties such as default time spans.
4. **Widget**: A widget is an object visualization contained in the dashboard. Examples include KPI Block, Trend, List of Groups, Table, Embedded Content. Each widget has a visualization or a Visual KPI object, along with its size and position on the dashboard.
5. **Bookmarks**: Quick links that navigate to a particular page or visualization within Visual KPI.


## Hierarchical vs Parent ID

There are two options to define the relationships between Profile Groups and Profiles, Profiles and Dashboards, and Dashboards to Widgets. One option is based on hierarchical positioning or nesting, and the other requires an attribute defining the parent ID (Profile Group ID, Profile ID, Dashboard ID).

Most customers choose to use a combination of specifying the parent ID and leveraging the inherent hierarchy. For example, placing all Widgets under the Dashboard Attribute but specifying the Profile ID in the dashboard properties.  Specifying the parent ID will override any implicit relationship defined based on its hierarchical position.  When in doubt specify!

Most customers use a combination of specifying the parent ID and leveraging the inherent hierarchy. For example, they place all widgets under the dashboard attribute but specify the Profile ID in the dashboard properties. Specifying the parent ID will override any implicit relationship defined by its hierarchical position.

### Hierarchical

For the hierarchical approach, you can nest widgets under a dashboard, dashboards under a profile, and profiles under profile groups. The representation below shows the hierarchy clearly, with each level nested under the appropriate parent level:

<Accordion title="Nesting Representation">
```
Profile Groups
│
├── Profile Group 1
│   ├── Profile 1
│   │   ├── Dashboard 1
│   │   │   ├── Widget 1
│   │   │   ├── Widget 2
│   │   │   └── Widget 3
│   │   ├── Dashboard 2
│   │   │   ├── Widget 1
│   │   │   └── Widget 2
│   │   └── Dashboard 3
│   │       ├── Widget 1
│   │       ├── Widget 2
│   │       └── Widget 3
│   ├── Profile 2
│   │   ├── Dashboard 1
│   │   │   ├── Widget 1
│   │   │   ├── Widget 2
│   │   │   └── Widget 3
│   │   └── Dashboard 2
│   │       ├── Widget 1
│   │       ├── Widget 2
│   │       └── Widget 3
│   └── Profile 3
│       ├── Dashboard 1
│       │   ├── Widget 1
│       │   ├── Widget 2
│       │   └── Widget 3
│       ├── Dashboard 2
│       │   ├── Widget 1
│       │   ├── Widget 2
│       │   └── Widget 3
│       └── Dashboard 3
│           ├── Widget 1
│           ├── Widget 2
│           └── Widget 3
│
└── Profile Group 2
    ├── Profile 1
    │   ├── Dashboard 1
    │   │   ├── Widget 1
    │   │   ├── Widget 2
    │   │   └── Widget 3
    │   └── Dashboard 2
    │       ├── Widget 1
    │       ├── Widget 2
    │       └── Widget 3
    ├── Profile 2
    │   ├── Dashboard 1
    │   │   ├── Widget 1
    │   │   ├── Widget 2
    │   │   └── Widget 3
    │   └── Dashboard 2
    │       ├── Widget 1
    │       ├── Widget 2
    │       └── Widget 3
    └── Profile 3
        ├── Dashboard 1
        │   ├── Widget 1
        │   ├── Widget 2
        │   └── Widget 3
        ├── Dashboard 2
        │   ├── Widget 1
        │   ├── Widget 2
        │   └── Widget 3
        └── Dashboard 3
            ├── Widget 1
            ├── Widget 2
            └── Widget 3

```
</Accordion>

This is also exemplified in the image below:

<StylizedImage
  imgURL="img/setup-adm/automation/how-to-use/af-database/new/af-1.png"
  alt=""
/>

### Parent ID

The second approach is to explicitly state the parent ID. To specify the Profile Group to which a profile belongs, you create an attribute called Profile Group ID with the value being the ID (GUID) of the Profile Group. This approach can also be used to define the Profile to which a Dashboard belongs using an attribute named Profile ID, as well as to specify the Dashboard to which a widget belongs using an attribute named Dashboard ID.

The image below showcases this approach:

<StylizedImage
  imgURL="img/setup-adm/automation/how-to-use/af-database/new/af-2.png"
  alt=""
/>

## Accessing AF Object IDs

In addition to Profile Group ID, Profile ID, and Dashboard ID, most widgets will also reference an AF Object ID. Getting these IDs is a simple task, but it requires enabling the option in the PI System Explorer. To do this, right-click in the bottom right corner of the PI System Explorer to display a menu that allows you to enable (or disable) the display of the Unique AF Object IDs (GUIDs).

<StylizedImage
  imgURL="img/setup-adm/automation/how-to-use/af-database/new/af-3.png"
  alt=""
/>

Once enabled, you can both view and copy the ID. The following example shows how the value for Profile Group ID was obtained. By selecting the attribute called AF Profile Group, the ID `559b8359-9b39-4e26-8977-4abf260d59cf` is displayed. This ID can then be pasted into the Profile Group ID attribute.

<StylizedImage
  imgURL="img/setup-adm/automation/how-to-use/af-database/new/af-4.png"
  alt=""
/>

:::info
If you wish to reference an object not created via the AF RCS, you can replace **AF Object ID** with **Visual KPI Object ID** and use the ID value found in the Visual KPI Designer.
:::

## Object Type

Using an attribute called **Object Type** is the preferred method of identifying AF Attributes' mapping to Visual KPI Objects. This is required when using the Visual KPI AF RCS to automate the creation of dashboards. All objects in the document will require an attribute called Object Type. The available values for it can be found in the link below:

<LinkCards numColumns={1} data={
  [
    {
      name: 'Object Types',
      linkTo: '/docs/reference/setup-and-administration/af-rcs-dashboard/object-types'
    },
  ]
}/>

:::note
Transpara recommends to always nest Visual KPI Attributes under another Attribute called Visual KPI Properties.
:::

## Widget Type

In addition to Object Type, there is another important attribute named **Widget Type**. When defining a widget, you will need both an Object Type set to `Widget Attribute` and a Widget Type attribute, which specifies the type of widget to create. Possible Widget Type values are presented in the link below:

<LinkCards numColumns={1} data={
  [
    {
      name: 'Widget Types',
      linkTo: '/docs/reference/setup-and-administration/af-rcs-dashboard/widgets'
    },
  ]
}/>

## Configuration

While you can create the required attributes anywhere in your AF Model to define Profile Groups, Profiles, Dashboards, and Widgets, you can also create a special AF Element specifically for this purpose. To create this configuration placeholder, create an AF Element with an attribute called Object Type and set its value to Configuration.

Typically, the Visual KPI AF RCS maps AF Elements to Visual KPI Groups. However, if an AF Element has a child attribute Object Type with a value of Configuration, the AF Element is not mapped to a Visual KPI Group. Instead, the child attributes are iterated through to find objects such as Profile Groups, Profiles, Dashboards, Widgets, and Bookmarks.

The example below uses this approach to isolate Visual KPI objects from the core AF Model. For instance, we have Group 01, Group 02, and Sub Group 01 elements in addition to a Configuration element. The Visual KPI AF RCS will create Visual KPI Groups for Group 01, Group 02, and Sub Group 01, but not for Configuration.

<StylizedImage
  imgURL="img/setup-adm/automation/how-to-use/af-database/new/af-5.png"
  alt=""
/>

## Design First

When building a dashboard programmatically by defining AF Attributes, it is best to first build one manually to better understand the size and position attributes. 

For example, if you want a dashboard with a Group List, a Group Geo, and three Group Block widgets, it is a good practice to first create it in Visual KPI. 

<StylizedImage
  imgURL="img/setup-adm/automation/how-to-use/af-database/new/af-6.png"
  alt=""
/>

Then, use the **Customize Dashboard** display to inspect the widget properties. Here information such as Type (which will map directly to Widget Type) along with Row Start, Column Start, Height and Width can be seen:

<StylizedImage
  imgURL="img/setup-adm/automation/how-to-use/af-database/new/af-7.png"
  alt=""
/>

## Reference

Attributes and values (both required and optional) can fully automate Dashboard creation from within OSIsoft's PI System Explorer. Each component (Profile Groups, Profiles, Dashboards, Widgets and Bookmarks) will have section listing all supported attributes. Find detailed reference about each with the links below:

<LinkCards numColumns={3} data={
  [
    {
      name: 'Object Types',
      linkTo: '/docs/reference/setup-and-administration/af-rcs-dashboard/object-types'
    },
    {
      name: 'Widget Types',
      linkTo: '/docs/reference/setup-and-administration/af-rcs-dashboard/widgets'
    },
    {
      name: 'Bookmark Types',
      linkTo: '/docs/reference/setup-and-administration/af-rcs-dashboard/bookmarks'
    },
  ]
}/>